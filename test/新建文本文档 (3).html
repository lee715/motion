<html>
<head>
	<title></title>
	<style type="text/css">
	body{
		overflow: hidden;
	}
	.mask{
		position: fixed;
		left: 0;
		top:0;
		right: 0;
		bottom:0;
		background: black;
		opacity: 0.5;
	}
	.div1{
		position: absolute;
		left: 0px;
		top: 0px;
		width: 2px;
		height: 2px;
		background: white;
		border-radius: 2px;
	}
	.div2{
		position: absolute;
		left: 0;
		top: 0px;
		width: 20px;
		height: 20px;
		border-radius: 20px;
		opacity: 0.8;
	}
	</style>
</head>
<!-- <body><div class="mask" ></div> -->

<div class="div2"></div>
</div>

<script type="text/javascript" src="jquery-min.js"></script>
<script type="text/javascript" src="m-min.js"></script>
<script type="text/javascript">
console.log($('[ed]')[0]);
var width = $('body').width()  ;
var height = $('body').height() ;
var getRandomColor = function(){
	var cols = [ 0, 0 ,0], i = 0, rand;

	for( ; i < 3 ; i++ ) {
		rand = Math.round( Math.random() * 15 ).toString(16);
		cols[i] = rand + rand;
	}	

	return "#" + cols.join('');
}

function move($dom){
	var p = Math.random();
	var v0 = parseInt(p * 35 + 5);
	var times = parseInt(p * 95 + 5);
	var color = getRandomColor();
	$dom.css('background', color);
	$dom.move(['freeFall', {v0: v0, ym: height-10, times: times}], function(){console.log('end')}, {
		stop: function(x, y, t){
			off = $dom.offset();
			if(off.left > width ){
				$dom.remove();
				return true;
			}else{
				return false;
			}
		}
	});
}

setInterval(function(){
	var $d = $('<div class="div2"></div>');
	$('body').append($d);
	move($d);
}, 100)

// var wind = 0;
// function move($dom){
// 	var p = Math.random();
// 	var xp = p * 1000;
// 	var ap = p / 10;
// 	// var color = getRandomColor();
// 	// $dom.css('background', color);
// 	$dom.move(function(t){return 80 * t}, ['line', {a: 4, b: 0}], function(){
// 		$dom.remove();
// 	},{
// 		stop: function(x, y, t){
// 			off = $dom.offset();
// 			if(off.left > width - 4  || off.top > height - 4){
// 				return true;
// 			}else{
// 				return false;
// 			}
// 		},
// 		step: function(x, y, track){
// 			// var p = Math.random();
// 			// p>0.3?track.b--:track.b++;
// 			track.b-=5;
// 		}

// 	})
// }	

var getRandomPos = function(){
	var p = Math.random();
	var m = Math.random();
	var x = m>0.1?parseInt(p * width):0;
	var y = m>0.1?0:parseInt(p * height);
	return {top:y+'px', left:x+'px'}
}

// setInterval(function(){
// 	var $d = $('<div class="div1"></div>');
// 	$('body').append($d.css(getRandomPos()));
// 	move($d);
// }, 20)


// var x = 0, y;
// $('.div1').motion(function(p, track, t){
// 	x++;
// 	y = track.getY(x);
// 	$('.div1').css({
// 		left: x+ 'px',
// 		top: y+ 'px'
// 	})
// }, ['parabola', {a:0.001,b:0,interval: [0,100]}], function(){
// 	console.log('end');
// }, {
// 	step: function(){
// 		var $d = $('<div></div>'), offset = $('.div1').offset();
// 		$d.css({
// 			position: 'absolute',
// 			left: offset.left,
// 			top: offset.top,
// 			width: '2px',
// 			height: '2px',
// 			background: 'red'
// 		});
// 		$('body').append($d);
// 	}
// });
// $('.div2').motion({left: '500px'}, ['line', {a:32,b:5,interval: [0,4]}], function(){
// 	console.log('end');
// });
// var width = $('body').width();
// var height = $('body').height();
// var t_t = Math.round(Math.sqrt(height / 5)); 
// var t_l = Math.round(width / 10);
// $('.div1').css('top', height*0.4  + 'px');
// $('.div1').motion(
// 	{top: height * 0.4 + 'px'}, 
// 	[
// 		['line', {a:-10,b:10, interval:[0,1]}],
// 		['line', {a:-10,b:0, interval:[0,1]}]
// 	],
// 	function(){
// 		console.log('end1');
// }, {
// 	type: 'decay-t'
// });
// $('.div1').motion({top: height * 0.4+ 100 + 'px'},['freeFall', {interval: [0,2]}], function(){
// 	console.log('end');
// }, {
// 	type: 'decay'
// })


// $('.div2').motion({left: width+'px'}, ['line', {a: 0,b:30, interval:[0,4]}], function(){
// 	console.log('end1');
// });
// $('.div2').motion({top: height+'px'}, ['line', {a: 10,b:0, interval:[0,1], type: 'decay'}], function(){
// 	console.log('end2');
// });
</script>
</body>
</html>